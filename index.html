<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PREDICADOR OS | V.27 INFINITE</title>
    <style>
        :root { --main: #00ff41; --fail: #ff0000; --bg: #000; --gold: #ffd700; }
        body { background: var(--bg); color: var(--main); font-family: 'Courier New', monospace; text-align: center; margin: 0; padding: 15px; text-transform: uppercase; overflow: hidden; height: 100vh; display: flex; align-items: center; justify-content: center; transition: 0.8s; }
        .gold-mode { --main: var(--gold); background: #1a1500 !important; }
        .night-mode { filter: contrast(1.3) brightness(0.7); background: #000500; }
        .frame { width: 100%; max-width: 380px; border: 2px solid var(--main); padding: 15px; background: #050505; box-shadow: 0 0 20px rgba(0,255,65,0.2); position: relative; transition: 0.5s; }
        .frame.gold-border { border-color: var(--gold); box-shadow: 0 0 50px var(--gold); }
        .boss-img { width: 100%; height: 150px; object-fit: cover; border: 1px solid var(--main); margin-bottom: 10px; }
        #timer { font-size: 3.5rem; color: var(--fail); margin: 10px 0; font-weight: 900; display: none; text-shadow: 0 0 10px #f00; }
        .status { font-size: 0.7rem; display: flex; justify-content: space-between; margin-bottom: 10px; border-bottom: 1px solid var(--main); padding-bottom: 5px; }
        .btn { width: 100%; padding: 18px; border: none; font-family: inherit; font-weight: 900; cursor: pointer; margin-top: 10px; font-size: 1rem; }
        .btn-p { background: var(--main); color: #000; }
        .btn-l { background: #000; color: var(--main); border: 2px solid var(--main); display: none; }
        #answer-input { display: none; width: 100%; background: #000; color: var(--main); border: 1px solid var(--main); padding: 12px; margin-top: 10px; text-align: center; font-size: 1.2rem; outline: none; }
        #death-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--fail); z-index: 1000; justify-content: center; align-items: center; flex-direction: column; animation: shake 0.1s infinite; color: #000; }
        @keyframes shake { 0% { transform: translate(2px, 2px); } 50% { transform: translate(-2px, -2px); } 100% { transform: translate(2px, -2px); } }
    </style>
</head>
<body>

<div id="death-screen">
    <h1 id="d-title" style="font-size: 3rem; margin:0;">ERROR</h1>
    <p id="d-msg" style="font-weight: 900; padding: 20px;"></p>
    <button class="btn" style="background:#000; color:#fff; width: 80%; border: 3px solid #fff;" onclick="location.reload()">REINTENTAR</button>
</div>

<div class="frame" id="main-frame">
    <div class="status">
        <span>RACHA: <b id="streak-val">0</b></span>
        <span id="night-tag"></span>
    </div>
    <img src="https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=400" class="boss-img">
    <select id="mode" onchange="clickSound()" style="width:100%; background:#000; color:var(--main); border:1px solid var(--main); padding:10px;">
        <option value="FISICO">ENTRENAMIENTO ESPARTANO</option>
        <option value="SANTIDAD">SANTIDAD DE HIERRO</option>
        <option value="MENTAL">INTERROGATORIO MENTAL</option>
    </select>
    <div id="msg" style="min-height: 80px; margin: 10px 0; border: 1px dashed #333; display: flex; align-items: center; justify-content: center; padding: 10px; font-size: 0.85rem;">EL PREDICADOR TE ESPERA.</div>
    <input type="text" id="answer-input" placeholder="ESCRIBE">
    <div id="timer">00:00</div>
    <button id="b-start" class="btn btn-p" onclick="startTask()">INICIAR JUICIO</button>
    <button id="b-done" class="btn btn-l" onclick="endTask()">CUMPLIDO</button>
</div>

<script>
    let racha = 0; let tInicio = 0; let intv; let qA = null;
    const aCtx = new (window.AudioContext || window.webkitAudioContext)();

    const db = {
        FISICO: ["100 Flexiones", "50 Burpees", "3 Min Plancha", "80 Sentadillas", "60 Fondos Tr칤ceps", "100 Mountain Climbers", "4 Min Wall Sit", "50 Zancadas Expl.", "70 Abdominales", "30 Dominadas/Remo", "150 Saltos Cuerda", "5 Min Estiramiento Activo", "40 Salto al Caj칩n", "60 Flexiones Diamante", "100 Pu침etazos Sombra"],
        SANTIDAD: ["Ducha Agua Helada", "1 Hora Sin M칩vil", "Limpiar Habitaci칩n Ya", "Ayuno Dopamina", "Cero Az칰car Hoy", "Meditar 10 Minutos", "Leer 20 P치ginas", "Planificar Ma침ana", "Cero Redes Sociales", "Escribir Diario 칄xitos", "Beber 1L Agua Ya", "Cero Quejas Hoy", "Levantarse Sin Posponer", "Ayuno Intermitente 16h"],
        MENTAL: [
            {q:"7 X 8 X 2", a:"112"}, {q:"RA칈Z 225", a:"15"}, {q:"ORO (SIMBOLO)", a:"AU"},
            {q:"CONTINENTE 4 (ALFAB)", a:"EUROPA"}, {q:"15% DE 200", a:"30"}, {q:"PLANETA 6", a:"SATURNO"},
            {q:"CANTIDAD HUESOS", a:"206"}, {q:"SIMBOLO PLATA", a:"AG"}, {q:"RAIZ 625", a:"25"},
            {q:"12 X 12", a:"144"}, {q:"A칌O DESC. AMERICA", a:"1492"}, {q:"GAS VITAL (SIMB)", a:"O"}
        ]
    };

    const clickSound = () => {
        const o = aCtx.createOscillator(); const g = aCtx.createGain();
        o.type = 'sine'; o.frequency.setValueAtTime(900, aCtx.currentTime);
        g.gain.setValueAtTime(0.03, aCtx.currentTime);
        o.connect(g); g.connect(aCtx.destination);
        o.start(); o.stop(aCtx.currentTime + 0.02);
    };

    window.onload = () => {
        const h = new Date().getHours();
        if(h >= 22 || h < 6) {
            document.body.classList.add('night-mode');
            document.getElementById('night-tag').innerText = "游깿 NOCTURNO";
        }
    };

    function startTask() {
        clickSound(); tInicio = Date.now();
        const m = document.getElementById('mode').value;
        document.getElementById('b-start').style.display = 'none';
        document.getElementById('mode').style.display = 'none';
        document.getElementById('b-done').style.display = 'block';
        document.getElementById('timer').style.display = 'block';

        if(m === 'MENTAL') {
            qA = db.MENTAL[Math.floor(Math.random()*db.MENTAL.length)];
            document.getElementById('msg').innerText = qA.q;
            document.getElementById('answer-input').style.display = 'block';
            document.getElementById('answer-input').focus();
        } else {
            document.getElementById('msg').innerText = db[m][Math.floor(Math.random()*db[m].length)];
        }

        intv = setInterval(() => {
            let s = Math.floor((Date.now() - tInicio)/1000);
            let min = Math.floor(s/60), seg = s%60;
            document.getElementById('timer').innerText = `${min<10?'0':''}${min}:${seg<10?'0':''}${seg}`;
        }, 1000);
    }

    function endTask() {
        clickSound(); clearInterval(intv);
        const sTotal = (Date.now() - tInicio)/1000;
        const mode = document.getElementById('mode').value;

        if(mode !== 'MENTAL' && sTotal < 10) { muerte("MENTIROSO", "INTENTASTE ENGA칌AR AL OJO."); return; }
        if(mode === 'MENTAL' && document.getElementById('answer-input').value.trim().toUpperCase() !== qA.a) { muerte("FALLO MENTAL", "CEREBRO DEFECTUOSO."); return; }

        racha++; document.getElementById('streak-val').innerText = racha;
        if(racha >= 5) {
            document.body.classList.add('gold-mode');
            document.getElementById('main-frame').classList.add('gold-border');
            const u = new SpeechSynthesisUtterance("ERES UN ELEGIDO.");
            u.pitch = 0.8; window.speechSynthesis.speak(u);
        }
        resetUI();
    }

    function muerte(t, msg) {
        document.getElementById('d-title').innerText = t;
        document.getElementById('d-msg').innerText = msg;
        document.getElementById('death-screen').style.display = 'flex';
        if(navigator.vibrate) navigator.vibrate([500, 200, 500]);
        const u = new SpeechSynthesisUtterance(t + ". " + msg);
        u.lang = 'es-ES'; u.pitch = 0.1; u.rate = 0.6; window.speechSynthesis.speak(u);
    }

    function resetUI() {
        document.getElementById('b-start').style.display = 'block';
        document.getElementById('mode').style.display = 'block';
        document.getElementById('b-done').style.display = 'none';
        document.getElementById('timer').style.display = 'none';
        document.getElementById('answer-input').style.display = 'none';
        document.getElementById('answer-input').value = "";
        document.getElementById('msg').innerText = "REGISTRADO. SIGUIENTE RETO.";
    }

    document.getElementById('answer-input').onkeydown = clickSound;
</script>
</body>
</html>
